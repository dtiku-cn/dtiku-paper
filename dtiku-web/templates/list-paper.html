{%- import "macros/general.html" as general -%}
{%- import "macros/paper.html" as paper -%}
<!doctype html>
<html lang="zh">

<head>
    {% call general::meta() %}
    <title>${province}{{root_exam_category.name}}{{current_paper_type.name}}真题库 | ${system_siteTitle}</title>
    {% call general::headerfiles() %}
</head>

<body class="container">
    {% call general::header() %}
    <div class="card mb-3">
        <header class="card-header d-flex p-1 align-items-center">
            <div class="dropdown">
                <a class="btn btn-link dropdown-toggle d-flex align-items-center" href="#" data-toggle="dropdown"
                    role="button" aria-expanded="false" id="clsDropdown">
                    <svg class="icon-svg icon-svg-sm mr-2">
                        <use xlink:href="#ic-library"></use>
                    </svg>
                    <strong>{{root_exam_category.name ~ " / " ~ current_paper_type.name}}</strong>
                </a>
                <div class="dropdown-menu shadow-sm" aria-labelledby="clsDropdown">
                    {% for p in global.paper_types %}
                    {% if let Some(paper_types) = p.children %}
                    {% for sub_type in paper_types %}
                    <a class="dropdown-item" href="?ty={{p.id}}">{{p.name ~ " / " ~ sub_type.name}}</a>
                    {% endfor %}
                    {% else %}
                    <a class="dropdown-item" href="?ty={{p.id}}">{{p.name}}</a>
                    {% endif %}
                    {% endfor %}
                </div>
            </div>
        </header>
        <div id="allProvinces" class="card-body d-flex flex-wrap">
            {% for l in label_tree.labels %}
            <a class="btn btn-link ${province==p?'active':''}"
                href="?ty={{current_paper_type.id}}&lid={{l.id}}">{{l.name}}</a>
            {% endfor %}
        </div>
    </div>

    <div class="card mb-3">
        <header class="d-flex card-header align-items-center">
            <svg class="icon-svg icon-svg-sm mr-2">
                <use xlink:href="#ic-list"></use>
            </svg>
            <strong>${province}{{current_paper_type.name}}试卷列表</strong>
        </header>
        <div id="fromType" class="text-center">
            <a class="btn btn-link" th:href="@{/paper(category=${cls.category},cls=${cls.text},province=${province})}"
                th:classappend="${fromType==null?'active':''}">全部</a>
            <a class="btn btn-link" th:each="t : ${allFromType}"
                th:href="@{/paper(category=${cls.category},cls=${cls.text},province=${province},fromType=${t})}"
                th:text="${t.text}" th:classappend="${fromType==t?'active':''}"></a>
        </div>
        {% call paper::paper_table(papers) %}
    </div>
    {% call general::footer() %}
</body>

</html>